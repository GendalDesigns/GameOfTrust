<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Game Control</title>
</head>
<nav style="
height:auto;
width:auto;
margin: 10px 20px;
display:flex;
flex-direction:row;
justify-content:flex-end;
align-items:center;">
    <div style="
    display: flex;
    width:175px;
    justify-content: space-between;">
    <h4><a href="/home/clear" class="btn btn-dark shadow shadow-2px">Choose Player</a></h4>
    <!-- <h4><a href="/logout" class="btn btn-danger shadow shadow-2px">Logout</a></h4> -->
    </div>
</nav>
<body>
  <div class="container">
    
    <div class="row">
      <div class="col"></div>
      <div class="col">
          <h1>Game Control</h1>
      </div>
      <div class="col"></div>
      
      <form action="" id="reset">
        <button type="submit" value="reset" class="btn btn-danger shadow shadow-2px">Reset</button>
      </form>
    </div> <!-- End of Row -->

    <!-- <div class="Col d-flex">
      <form action="/player1" id="player1">
        <button form="player1" type="submit" value="Player 1" class="btn btn-primary shadow shadow-2px">Player 1</button>
      </form>
      <form action="/player2" id="player2">
        <button form="player2" type="submit" value="Player 2" class="btn btn-primary shadow shadow-2px">Player 2</button>
      </form>
    </div> -->
    <div class="d-flex justify-content-between">
    <div class="row">
      <h2>Players Votes</h2>
        <div class="col" style="
        height:300px;
        overflow: auto;">
          <div class="pv"></div>
        </div>
    </div><!-- End of Row -->

    <div>
      <div> Coop Count: <span id="coopCount">{{count['coop_count']}}</span></div>
      <div> Cheat Count: <span id="cheatCount">{{count['cheat_count']}}</span></div>
    </div>
    <div>
      <h2>Players Chat</h2>
      <h3 id="noMSG" style='color: #ccc;font-size: 30px;'>No message yet..</h3>
      <div class="message_holder" style="
      height:300px;
      overflow: auto;"></div>
    </div>
  </div>
    <!-- <form action="" method="POST">
      <input type="text" class="username" placeholder="User Name"/>
      <input type="text" class="message" placeholder="Messages"/>
      <input type="submit"/>
    </form> -->
    
  </div> <!-- End of container -->


    <div class="container">
      <h2>Player # Stats</h2>
      <p>{ %for player in players% }</p>
      <div class="container d-flex" style="
      width:fit-content;
      border:2px solid black;">
          <table class="table table-striped">
              <tfoot>
                  <th>Player # Current Vote</th>
              </tfoot>
              <tbody>
                  <tr>
                      <td>Current Vote</td>
                  </tr>
              </tbody>
          </table>
          <table class="table table-striped">
              <tfoot>
                  <th>Player # Previous Votes</th>
              </tfoot>
              <tbody>
                  <div class="d-flex">
                  <!-- {% for vote in votes %} -->
                      <div class="container">
                          <tr>
                              <td>Vote1</td>
                          </tr>
                          <tr>
                              <td>Vote2</td>
                          </tr>
                          <tr>
                              <td>Vote3</td>
                          </tr>
                      </div>
                      <div class="container">
                          <tr>
                              <td>Vote1</td>
                          </tr>
                          <tr>
                              <td>Vote2</td>
                          </tr>
                          <tr>
                              <td>Vote3</td>
                          </tr>
                      </div>
                  <!-- {% endfor %} -->
                  </div>
              </tbody>
          </table>
      </div>
    </div><!-- End of Container -->





    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script> -->
    <script src="https://cdn.socket.io/3.1.3/socket.io.min.js" integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/game_control_script.js') }}"></script>
    <script type="text/javascript">
/*
      var socket = io.connect('http://' + document.domain + ':' + location.port);
      socket.on( 'connect', function() {
        socket.emit( 'my event', {
          data: 'User Connected'
        } )
        var form = $( 'form' ).on( 'submit', function( e ) {
          e.preventDefault()
          let user_name = $( 'input.username' ).val()
          let user_input = $( 'input.message' ).val()
          socket.emit( 'my event', {
            user_name : user_name,
            message : user_input
          } )
          $( 'input.message' ).val( '' ).focus()
        } )
      } )

      
      socket.on( 'my response', function( msg ) {
        if( typeof msg.user_name !== 'undefined' ) {
          $( '#noMSG' ).remove()
          $( 'div.message_holder' ).append( '<div><b style="color: #000">'+msg.user_name+'</b> '+msg.message+'</div>' )
        }
      })
      
      

      socket.on( 'my vote response', function( msg ) {
        //if( typeof msg.player === '1' ) {          
          $( 'div.p1v' ).append( '<div><b style="color: #000">'+ 'Player '+msg.player+'</b> '+msg.vote+'</div>' )
          if (msg.vote==='cheat'){
            $( 'div.p1v' ).append( 'player has cheated' )
          }
        //}
      })
*/
    </script>

  </body>
  </html>